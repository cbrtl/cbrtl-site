<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>vyse | cbrtl</title>
<meta name="keywords" content="project, community">
<meta name="description" content="Vyse is a dynamically typed, interpreted and fast scriptling language inspired by Lua for rapid prototyping of applications like video games.">
<meta name="author" content="Srijan Paul">
<link rel="canonical" href="https://cbrtl.github.io/posts/vyse/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.0b739a2e2c5e5656e4bcd5f0b2268d063addaf81d89ec3987d6af8f04decdc97.css" integrity="sha256-C3OaLixeVlbkvNXwsiaNBjrdr4HYnsOYfWr48E3s3Jc=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js" integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://cbrtl.github.io/icon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://cbrtl.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://cbrtl.github.io/icon.ico">
<link rel="apple-touch-icon" href="https://cbrtl.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://cbrtl.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="vyse" />
<meta property="og:description" content="Vyse is a dynamically typed, interpreted and fast scriptling language inspired by Lua for rapid prototyping of applications like video games." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cbrtl.github.io/posts/vyse/" /><meta property="og:image" content="https://cbrtl.github.io/papermod-cover.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-15T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2022-06-15T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://cbrtl.github.io/papermod-cover.png"/>

<meta name="twitter:title" content="vyse"/>
<meta name="twitter:description" content="Vyse is a dynamically typed, interpreted and fast scriptling language inspired by Lua for rapid prototyping of applications like video games."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://cbrtl.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "vyse",
      "item": "https://cbrtl.github.io/posts/vyse/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "vyse",
  "name": "vyse",
  "description": "Vyse is a dynamically typed, interpreted and fast scriptling language inspired by Lua for rapid prototyping of applications like video games.",
  "keywords": [
    "project", "community"
  ],
  "articleBody": "Vyse Vyse\rAn elegant and embeddable programming language\rVisit the language spec »\rWebsite »\rReport Bug\r•\rRequest Feature\rCI Status [MIT License](https://github.com/tterb/atomic-design-ui/blob/master/LICENSEs)\nVyse is a dynamically typed, interpreted and fast scriptling language inspired by Lua for rapid prototyping of applications like video games. Programmers familiar with Lua/Javascript can pick up the language within an hour. Vyse also comes with a C++ API for frictionless embedding in projects.\nTable of Contents Vyse Table of Contents Goal Overview Roadmap Implementation Lexing / Tokenizing (Source string -\u003e Token) Compiling (Tokens -\u003e Bytecode) VyVM Building Benchmarks Tests Editor-Support Development Goal Vyse aims to pick up after the Lua programming language, by adding popularly desired features on top of it, whilst providing similar speed and minimalism as Lua. There exist some quirks in Lua that Vyse aims to change.\nVariables are global by default\nLong keywords like local and the use of do .. end to designate blocks instead of {} makes it unlikeable to programmers coming from C.\nThe concept of metatables and metamethods is somewhat unintuitive to new programmers.\nTables being used as both arrays and maps can have unwanted side effects.\nLacks many features that are common in other languages such as :\nCompound assignment operators (+=, -=, *=) and decrement and increment operators (++, --) . continue statement for skipping over some loop iterations. switch statements. Arrays starting at 1 is a a minor issue to some.\nVyse aims to keep most of what Lua provides, but address the aforementioned issues and offer the following QoL feautures:\nA Familiar syntax for programmers migrating from Javascript and C An easy to integrate C++ API for easy embedding in applications Syntactic sugar for JS like OOP that boils down to the very same metatable and metamethod heirarchy. Overview Here is a rough overview of the language’s syntax and features:\n-- importing modules is done with the builtin 'import' function const math = import(\"math\") -- variable declaration and assignment const PI = math.pi -- variables declared with const are immutable let radius = 10 -- Function declaration fn calculate_area(r) { return PI * r ** 2 -- '**' operator is used for exponentiation. } let area = calculate_area(radius) -- function calling -- constructing objects is very similar to Javascript. let goblin = { name: \"Bobo\", health: 12, damage: 4, attack(target) { target.health -= this.damage print(\"Goblin attacks!\") }, }; -- methods is done with the `:` operator. let wolf = { health: 20 } goblin:attack(wolf) -- Arrays are intuitive too let numbers = [1, 3, 5, 7, 9] -- the '#' operator returns length of lists or strings. print('I have ' .. #numbers .. 'numbers!') // '..' is the concat operator -- the `\u003c\u003c\u003c` operator can be used to push to arrays numbers \u003c\u003c\u003c 10 \u003c\u003c\u003c 11 -- looping is very similar to lua. for i = 1, #numbers { print(numbers[i]) } -- conditionals math.randseed(time.now()); const number = math.random(0, 100); let guess = input():to_number(); -- read user input and parse as a number while true { if guess \u003c number { print(\"Too low! Try higher\") } else if guess \u003e number { print(\"Too hight! Guess lower\") } else { print(\"You guessed it! The number was \" .. number); break } } For a more complete spec of the language, and all it’s features visit manual.md. Alternatively, read the documentation on this page.\nRoadmap Currently, vyse supports basic control flow, variable declaration, usage and basic collection data structures. To move towards a more complete implementation, the following tasks have to be attended to:\nImplement parent tables (metatables in Lua). (DONE) Add a complete list of collection types (Arrays and tables). (DONE) Implement proper error reporting in all the passes. (DONE) Full support for Lambdas and closures. (DONE) Optimze value representation to optionally NaN boxed values. Optimize the garbage collector for incremental collection. Optimize the VM’s loop-dispatch to computed jumps. Add more compiler passes for better optimization. Implementation Vyse runs on the Vyse Virtual Machine (svm for short). The VM has a stack based architechture that operates on 1 byte long opcodes. To keep the implementation concise and simple, vyse uses a single pass compiler that directly consumes tokens and emits bytecode.\nThe stages involved are :\nLexing / Tokenizing (Source string -\u003e Token) The vyse lexer resides in the include/scanner.hpp file, A simple hand written lexer that accepts a string returns a token whenever the method next_token() is called. The Lexer is called from within the Compiler, but can also be instantiated and used stand-alone for testing purposes.\nCompiling (Tokens -\u003e Bytecode) The Compiler compiles tokens to Bytecode following the Vyse Bytecode Instruction format (include/x_opcode.hpp). Every instruction is 1 byte long. The compiler returns a function containing all the bytecode from the script, which is then loaded into the VM and called.\nVyVM The design of the VyVM is very similar to the Lua Virtual Machine despite the fact that it’s Stack based as opposed to LuaVM’s register based design (after version 5.1). It consists of a value stack and an accumulator register. It has full support for lambdas and closures following Lua’s upvalue design.\nBuilding To build vyse from source, it is recommended that you use CMake (version 3.13 or higher). The build tool used here is Ninja, but you can use any other build tool of your preference (eg- 'Unix Makefiles').\nAfter downloading/cloning vyse into a directory, cd into it and run the following commands to run the tests:\nmkdir build cd build cmake .. -G Ninja -DBUILD_TESTS=true -DCMAKE_BUILD_TYPE=Debug -DSTRESS_GC=true -DCMAKE_EXPORT_COMPILE_COMMANDS=1 -DCMAKE_C_COMPILER=clang -DCMAKE_CXX_COMPILER=clang++ ninja ./vy The CMake script accepts some options, namely:\nOption Values Description -DCMAKE_BUILD_TYPE Release/Debug Compilation mode for the C++ compiler. Also enables runtime assertions. -DBUILD_TESTS true/false Whether to build the test suite. -DSTRESS_GC true/false When true, runs the garbage collector whenever possible. Useful for catching GC bugs. -DLOG_GC true/false When true, logs the GC status on every cycle. -DLOG_DISASM true/false When true, dumps the bytecode disassembly of every program after the compiler pass, before running it on the VM Note that -CMAKE_C_COMPILER=clang -CMAKE_CXX_COMPILER=clang++ are optional, and you can use any C++ compiler toolchain of your liking. The aforementioned snippet will build the project in debug mode, which is preferred for development but is much, much slower.\nFor an optimized release build, use:\ncmake .. -G Ninja -DBUILD_TESTS=true -DCMAKE_BUILD_TYPE=Release -DSTRESS_GC=false -DLOG_GC=false -DLOG_DISASM=false Benchmarks The benchmarks for vyuse are present in the benchmark directory. The benchmark/run.py script can be used to compare Vyse against other languages. You can either run all benchmarks, or run specific benchmarks.\nFirst, create and activate a virtual environment:\ncd benchmarks python3 -m venv env source env/bin/activate Then, install all the dependencies inside the virtual environment:\npython3 -m pip install -r requirements.txt To run all benchmarks, enter the following into your shell:\ncd benchmarks python3 run.py To run, a specific benchmark, use the --bench option:\npython3 run.py --bench=fib Tests For testing, the ctest utility is used along with some hand written helper headers. To run existing tests, run ctest inside the build directory (bin or out). Tests of all kinds can be found under the test directory.\n(Note: time is in seconds)\nIf your terminal does not have ASNI support, or you want to pipe the benchmarks to a file for reporting, then you can use the --nocolor flag.\nEditor-Support Currently, syntax highlighting and code completion snippets are supported on the following code editors:\nVS Code Sublime text [In Progress] Vim [Coming soon] Atom [Coming soon] Development If you’re looking to contribute to vyse, It is recommended to have clang-format for formatting and clangd language server for your text editor. On VSCode, the C/C++ extension can be used to debug the executable. Alternatively, you can use GDC/LLDB or other debuggers to your liking.\nThe sources are in src/ while the public headers are in include/. A basic CLI module is present under cli/.\n",
  "wordCount" : "1307",
  "inLanguage": "en",
  "datePublished": "2022-06-15T00:00:00Z",
  "dateModified": "2022-06-15T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Srijan Paul"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://cbrtl.github.io/posts/vyse/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "cbrtl",
    "logo": {
      "@type": "ImageObject",
      "url": "https://cbrtl.github.io/icon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://cbrtl.github.io" accesskey="h" title="cbrtl (Alt + H)">cbrtl</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://cbrtl.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://cbrtl.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://cbrtl.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://cbrtl.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://cbrtl.github.io">Home</a>&nbsp;»&nbsp;<a href="https://cbrtl.github.io/posts/">Posts</a></div>
    <h1 class="post-title">
      vyse
    </h1>
    <div class="post-description">
      Vyse is a dynamically typed, interpreted and fast scriptling language inspired by Lua for rapid prototyping of applications like video games.
    </div>
    <div class="post-meta"><span title='2022-06-15 00:00:00 +0000 UTC'>June 15, 2022</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Srijan Paul&nbsp;|&nbsp;<a href="https://github.com/adityatelange/hugo-PaperMod/tree/exampleSite/content/posts/vyse.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#vyse" aria-label="Vyse">Vyse</a><ul>
                        
                <li>
                    <a href="#" aria-label="Vyse">Vyse</a></li>
                <li>
                    <a href="#table-of-contents" aria-label="Table of Contents">Table of Contents</a></li>
                <li>
                    <a href="#goal" aria-label="Goal">Goal</a></li>
                <li>
                    <a href="#overview" aria-label="Overview">Overview</a></li>
                <li>
                    <a href="#roadmap" aria-label="Roadmap">Roadmap</a></li>
                <li>
                    <a href="#implementation" aria-label="Implementation">Implementation</a><ul>
                        
                <li>
                    <a href="#lexing--tokenizing-source-string---token" aria-label="Lexing / Tokenizing (Source string -&amp;gt; Token)">Lexing / Tokenizing (Source string -&gt; Token)</a></li>
                <li>
                    <a href="#compiling-tokens---bytecode" aria-label="Compiling (Tokens -&amp;gt; Bytecode)">Compiling (Tokens -&gt; Bytecode)</a></li>
                <li>
                    <a href="#vyvm" aria-label="VyVM">VyVM</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#building" aria-label="Building">Building</a></li>
                <li>
                    <a href="#benchmarks" aria-label="Benchmarks">Benchmarks</a></li>
                <li>
                    <a href="#tests" aria-label="Tests">Tests</a></li>
                <li>
                    <a href="#editor-support" aria-label="Editor-Support">Editor-Support</a></li>
                <li>
                    <a href="#development" aria-label="Development">Development</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="vyse">Vyse<a hidden class="anchor" aria-hidden="true" href="#vyse">#</a></h1>
<br />
<p align="center">
  <a href="#">
    <img src="/assets/vyse_logo.svg" alt="Logo" width="200" height="200">
  </a>
  <h2 align="center">Vyse</h2>
  <p align="center">
   An elegant and embeddable programming language
    <br />
    <a href="https://github.com/srijan-paul/snap/blob/main/doc/manual.md"><b>Visit the language spec »</b></a>
    <a href="https://srijan-paul.github.io/vyse"><b>Website »</b>
    </a>
    <br />
    <br />
    <a href="https://github.com/srijan-paul/vyse/issues">Report Bug</a>
     •
    <a href="https://github.com/srijan-paul/vyse/issues">Request Feature</a>
  </p>
</p>
<p><a href="https://github.com/srijan-paul/snap/actions/workflows/test.yml/badge.svg">CI Status</a>
[<a href="https://img.shields.io/apm/l/atomic-design-ui.svg?">MIT License</a>](<a href="https://github.com/tterb/atomic-design-ui/blob/master/LICENSEs">https://github.com/tterb/atomic-design-ui/blob/master/LICENSEs</a>)</p>
<p>Vyse is a dynamically typed, interpreted and fast scriptling language inspired by Lua for rapid prototyping of applications like video games. Programmers familiar with Lua/Javascript can pick up the language within an hour.
Vyse also comes with a C++ API for frictionless embedding in projects.</p>
<h2 id="table-of-contents">Table of Contents<a hidden class="anchor" aria-hidden="true" href="#table-of-contents">#</a></h2>
<ul>
<li><a href="#vyse">Vyse</a>
<ul>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#goal">Goal</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#roadmap">Roadmap</a></li>
<li><a href="#implementation">Implementation</a>
<ul>
<li><a href="#lexing--tokenizing-source-string---token">Lexing / Tokenizing (Source string -&gt; Token)</a></li>
<li><a href="#compiling-tokens---bytecode">Compiling (Tokens -&gt; Bytecode)</a></li>
<li><a href="#vyvm">VyVM</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#building">Building</a></li>
<li><a href="#benchmarks">Benchmarks</a></li>
<li><a href="#tests">Tests</a></li>
<li><a href="#editor-support">Editor-Support</a></li>
<li><a href="#development">Development</a></li>
</ul>
<h2 id="goal">Goal<a hidden class="anchor" aria-hidden="true" href="#goal">#</a></h2>
<p>Vyse aims to pick up after the Lua programming language, by adding popularly desired features on top of it,
whilst providing similar speed and minimalism as Lua.
There exist some quirks in Lua that Vyse aims to change.</p>
<ul>
<li>
<p>Variables are global by default</p>
</li>
<li>
<p>Long keywords like <code>local</code> and the use of <code>do .. end</code> to designate blocks instead of <code>{}</code> makes it unlikeable to programmers coming from C.</p>
</li>
<li>
<p>The concept of metatables and metamethods is somewhat unintuitive to new programmers.</p>
</li>
<li>
<p>Tables being used as both arrays and maps can have unwanted side effects.</p>
</li>
<li>
<p>Lacks many features that are common in other languages such as :</p>
<ul>
<li>Compound assignment operators (<code>+=</code>, <code>-=</code>, <code>*=</code>) and decrement and increment operators (<code>++</code>, <code>--</code>) .</li>
<li><code>continue</code> statement for skipping over some loop iterations.</li>
<li><code>switch</code> statements.</li>
</ul>
</li>
<li>
<p>Arrays starting at 1 is a a minor issue to some.</p>
</li>
</ul>
<p>Vyse aims to keep most of what Lua provides, but address the aforementioned issues and offer the following QoL feautures:</p>
<ul>
<li>A Familiar syntax for programmers migrating from Javascript and C</li>
<li>An easy to integrate C++ API for easy embedding in applications</li>
<li>Syntactic sugar for JS like OOP that boils down to the very same metatable and metamethod heirarchy.</li>
</ul>
<h2 id="overview">Overview<a hidden class="anchor" aria-hidden="true" href="#overview">#</a></h2>
<p>Here is a rough overview of the language&rsquo;s syntax and features:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#75715e">-- importing modules is done with the builtin &#39;import&#39; function</span>
</span></span><span style="display:flex;"><span>const math <span style="color:#f92672">=</span> import(<span style="color:#e6db74">&#34;math&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">--  variable declaration and assignment</span>
</span></span><span style="display:flex;"><span>const PI <span style="color:#f92672">=</span> math.pi <span style="color:#75715e">-- variables declared with const are immutable</span>
</span></span><span style="display:flex;"><span>let radius <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">--  Function declaration</span>
</span></span><span style="display:flex;"><span>fn calculate_area(r) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> PI <span style="color:#f92672">*</span> r <span style="color:#f92672">**</span> <span style="color:#ae81ff">2</span> <span style="color:#75715e">-- &#39;**&#39; operator is used for exponentiation.</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>let area <span style="color:#f92672">=</span> calculate_area(radius) <span style="color:#75715e">-- function calling</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">--  constructing objects is very similar to Javascript.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>let goblin <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  name: <span style="color:#e6db74">&#34;Bobo&#34;</span>,
</span></span><span style="display:flex;"><span>  health: <span style="color:#ae81ff">12</span>,
</span></span><span style="display:flex;"><span>  damage: <span style="color:#ae81ff">4</span>,
</span></span><span style="display:flex;"><span>  attack(target) {
</span></span><span style="display:flex;"><span>    target.health <span style="color:#f92672">-=</span> this.damage
</span></span><span style="display:flex;"><span>		print(<span style="color:#e6db74">&#34;Goblin attacks!&#34;</span>)
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">--  methods is done with the `:` operator.</span>
</span></span><span style="display:flex;"><span>let wolf <span style="color:#f92672">=</span> { health: <span style="color:#ae81ff">20</span> }
</span></span><span style="display:flex;"><span>goblin:attack(wolf)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">--  Arrays are intuitive too</span>
</span></span><span style="display:flex;"><span>let numbers <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">9</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- the &#39;#&#39; operator returns length of lists or strings.</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#39;I have &#39;</span> <span style="color:#f92672">..</span> <span style="color:#f92672">#</span>numbers <span style="color:#f92672">..</span> <span style="color:#e6db74">&#39;numbers!&#39;</span>) <span style="color:#f92672">//</span> <span style="color:#e6db74">&#39;..&#39;</span> is the concat operator
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- the `&lt;&lt;&lt;` operator can be used to push to arrays</span>
</span></span><span style="display:flex;"><span>numbers <span style="color:#f92672">&lt;&lt;&lt;</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">&lt;&lt;&lt;</span> <span style="color:#ae81ff">11</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- looping is very similar to lua.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, <span style="color:#f92672">#</span>numbers  {
</span></span><span style="display:flex;"><span>	print(numbers[i])
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">--  conditionals</span>
</span></span><span style="display:flex;"><span>math.randseed(time.now());
</span></span><span style="display:flex;"><span>const number <span style="color:#f92672">=</span> math.random(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>let guess <span style="color:#f92672">=</span> input():to_number(); <span style="color:#75715e">-- read user input and parse as a number</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> <span style="color:#66d9ef">true</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> guess <span style="color:#f92672">&lt;</span> number {
</span></span><span style="display:flex;"><span>		print(<span style="color:#e6db74">&#34;Too low! Try higher&#34;</span>)
</span></span><span style="display:flex;"><span>	} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> guess <span style="color:#f92672">&gt;</span> number {
</span></span><span style="display:flex;"><span>		print(<span style="color:#e6db74">&#34;Too hight! Guess lower&#34;</span>)
</span></span><span style="display:flex;"><span>	} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>		print(<span style="color:#e6db74">&#34;You guessed it! The number was &#34;</span> <span style="color:#f92672">..</span> number);
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>For a more complete spec of the language, and all it&rsquo;s features visit <a href="./doc/manual.md">manual.md</a>.
Alternatively, read the documentation on <a href="https://srijan-paul.github.io/vyse/book/">this</a> page.</p>
<h2 id="roadmap">Roadmap<a hidden class="anchor" aria-hidden="true" href="#roadmap">#</a></h2>
<p>Currently, vyse supports basic control flow, variable declaration, usage and basic collection data structures.
To move towards a more complete implementation, the following tasks have to be attended to:</p>
<ol>
<li><input checked="" disabled="" type="checkbox"> Implement parent tables (metatables in Lua). (<strong>DONE</strong>)</li>
<li><input checked="" disabled="" type="checkbox"> Add a complete list of collection types (Arrays and tables). (<strong>DONE</strong>)</li>
<li><input checked="" disabled="" type="checkbox"> Implement proper error reporting in all the passes. (<strong>DONE</strong>)</li>
<li><input checked="" disabled="" type="checkbox"> Full support for Lambdas and closures. (<strong>DONE</strong>)</li>
<li><input disabled="" type="checkbox"> Optimze value representation to optionally NaN boxed values.</li>
<li><input disabled="" type="checkbox"> Optimize the garbage collector for incremental collection.</li>
<li><input disabled="" type="checkbox"> Optimize the VM&rsquo;s loop-dispatch to computed jumps.</li>
<li><input disabled="" type="checkbox"> Add more compiler passes for better optimization.</li>
</ol>
<h2 id="implementation">Implementation<a hidden class="anchor" aria-hidden="true" href="#implementation">#</a></h2>
<p>Vyse runs on the Vyse Virtual Machine (svm for short). The VM has a stack based architechture that operates on 1 byte long opcodes. To keep the implementation concise and simple, vyse uses a single pass compiler that directly consumes tokens
and emits bytecode.</p>
<p>The stages involved are :</p>
<h3 id="lexing--tokenizing-source-string---token">Lexing / Tokenizing (Source string -&gt; Token)<a hidden class="anchor" aria-hidden="true" href="#lexing--tokenizing-source-string---token">#</a></h3>
<p>The vyse lexer resides in the <code>include/scanner.hpp</code> file, A simple hand written lexer that accepts a string returns a
token whenever the method <code>next_token()</code> is called.
The Lexer is called from within the Compiler, but can also be instantiated and used stand-alone for testing purposes.</p>
<h3 id="compiling-tokens---bytecode">Compiling (Tokens -&gt; Bytecode)<a hidden class="anchor" aria-hidden="true" href="#compiling-tokens---bytecode">#</a></h3>
<p>The Compiler compiles tokens to Bytecode following the Vyse Bytecode Instruction format (<code>include/x_opcode.hpp</code>).
Every instruction is 1 byte long. The compiler returns a function containing all the bytecode from the script, which is
then loaded into the VM and called.</p>
<h3 id="vyvm">VyVM<a hidden class="anchor" aria-hidden="true" href="#vyvm">#</a></h3>
<p>The design of the VyVM is very similar to the Lua Virtual Machine despite the fact that it&rsquo;s Stack based as opposed to LuaVM&rsquo;s register based design (after version 5.1). It consists of a value stack and an accumulator register.
It has full support for lambdas and closures following Lua&rsquo;s upvalue design.</p>
<h1 id="building">Building<a hidden class="anchor" aria-hidden="true" href="#building">#</a></h1>
<p>To build vyse from source, it is recommended that you use CMake (version 3.13 or higher).
The build tool used here is Ninja, but you can use any other build tool of your preference (eg- <code>'Unix Makefiles'</code>).</p>
<p>After downloading/cloning vyse into a directory, <code>cd</code> into it and run the following commands to run the tests:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir build
</span></span><span style="display:flex;"><span>cd build
</span></span><span style="display:flex;"><span>cmake .. -G Ninja -DBUILD_TESTS<span style="color:#f92672">=</span>true -DCMAKE_BUILD_TYPE<span style="color:#f92672">=</span>Debug -DSTRESS_GC<span style="color:#f92672">=</span>true -DCMAKE_EXPORT_COMPILE_COMMANDS<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> -DCMAKE_C_COMPILER<span style="color:#f92672">=</span>clang -DCMAKE_CXX_COMPILER<span style="color:#f92672">=</span>clang++
</span></span><span style="display:flex;"><span>ninja
</span></span><span style="display:flex;"><span>./vy &lt;filename&gt;
</span></span></code></pre></div><p>The CMake script accepts some options, namely:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Values</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-DCMAKE_BUILD_TYPE</code></td>
<td><code>Release</code>/<code>Debug</code></td>
<td>Compilation mode for the C++ compiler. Also enables runtime assertions.</td>
</tr>
<tr>
<td><code>-DBUILD_TESTS</code></td>
<td><code>true</code>/<code>false</code></td>
<td>Whether to build the test suite.</td>
</tr>
<tr>
<td><code>-DSTRESS_GC</code></td>
<td><code>true</code>/<code>false</code></td>
<td>When <code>true</code>, runs the garbage collector whenever possible. Useful for catching GC bugs.</td>
</tr>
<tr>
<td><code>-DLOG_GC</code></td>
<td><code>true</code>/<code>false</code></td>
<td>When <code>true</code>, logs the GC status on every cycle.</td>
</tr>
<tr>
<td><code>-DLOG_DISASM</code></td>
<td><code>true</code>/<code>false</code></td>
<td>When <code>true</code>, dumps the bytecode disassembly of every program after the compiler pass, before running it on the VM</td>
</tr>
</tbody>
</table>
<p>Note that <code>-CMAKE_C_COMPILER=clang -CMAKE_CXX_COMPILER=clang++</code> are optional, and you can use any C++ compiler toolchain of your liking.
The aforementioned snippet will build the project in debug mode, which is preferred for development but is much, much slower.</p>
<p>For an optimized release build, use:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cmake .. -G Ninja -DBUILD_TESTS<span style="color:#f92672">=</span>true -DCMAKE_BUILD_TYPE<span style="color:#f92672">=</span>Release -DSTRESS_GC<span style="color:#f92672">=</span>false -DLOG_GC<span style="color:#f92672">=</span>false -DLOG_DISASM<span style="color:#f92672">=</span>false
</span></span></code></pre></div><h1 id="benchmarks">Benchmarks<a hidden class="anchor" aria-hidden="true" href="#benchmarks">#</a></h1>
<p>The benchmarks for vyuse are present in the <code>benchmark</code> directory.
The <code>benchmark/run.py</code> script can be used to compare Vyse against other languages.
You can either run all benchmarks, or run specific benchmarks.</p>
<p>First, create and activate a virtual environment:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cd benchmarks
</span></span><span style="display:flex;"><span>python3 -m venv env
</span></span><span style="display:flex;"><span>source env/bin/activate
</span></span></code></pre></div><p>Then, install all the dependencies inside the virtual environment:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>python3 -m pip install -r requirements.txt
</span></span></code></pre></div><p>To run all benchmarks, enter the following into your shell:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cd benchmarks
</span></span><span style="display:flex;"><span>python3 run.py
</span></span></code></pre></div><p>To run, a specific benchmark, use the <code>--bench</code> option:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>python3 run.py --bench<span style="color:#f92672">=</span>fib
</span></span></code></pre></div><h1 id="tests">Tests<a hidden class="anchor" aria-hidden="true" href="#tests">#</a></h1>
<p>For testing, the <code>ctest</code> utility is used along with some hand written helper headers.
To run existing tests, run <code>ctest</code> inside the build directory (<code>bin</code> or <code>out</code>).
Tests of all kinds can be found under the <code>test</code> directory.</p>
<p><img loading="lazy" src="./media/fib-bench.png" alt="Fibonacci benchmark"  />
</p>
<p>(Note: time is in seconds)</p>
<p>If your terminal does not have ASNI support, or you want to pipe the benchmarks to a
file for reporting, then you can use the <code>--nocolor</code> flag.</p>
<h1 id="editor-support">Editor-Support<a hidden class="anchor" aria-hidden="true" href="#editor-support">#</a></h1>
<p>Currently, syntax highlighting and code completion snippets are supported on the following code editors:</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> <a href="https://github.com/srijan-paul/vscode-vyse">VS Code</a></li>
<li><input disabled="" type="checkbox"> Sublime text [In Progress]</li>
<li><input disabled="" type="checkbox"> Vim [Coming soon]</li>
<li><input disabled="" type="checkbox"> Atom [Coming soon]</li>
</ul>
<h1 id="development">Development<a hidden class="anchor" aria-hidden="true" href="#development">#</a></h1>
<p>If you&rsquo;re looking to contribute to vyse, It is recommended to have clang-format for formatting and clangd language server for your text editor.
On VSCode, the <code>C/C++</code> extension can be used to debug the executable.
Alternatively, you can use GDC/LLDB or other debuggers to your liking.</p>
<p>The sources are in <code>src/</code> while the public headers are in <code>include/</code>.
A basic CLI module is present under <code>cli/</code>.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://cbrtl.github.io/tags/project/">project</a></li>
      <li><a href="https://cbrtl.github.io/tags/community/">community</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://cbrtl.github.io/posts/ratenect/">
    <span class="title">Next »</span>
    <br>
    <span>Project: Ratenect</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share vyse on twitter"
        href="https://twitter.com/intent/tweet/?text=vyse&amp;url=https%3a%2f%2fcbrtl.github.io%2fposts%2fvyse%2f&amp;hashtags=project%2ccommunity">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share vyse on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fcbrtl.github.io%2fposts%2fvyse%2f&amp;title=vyse&amp;summary=vyse&amp;source=https%3a%2f%2fcbrtl.github.io%2fposts%2fvyse%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share vyse on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fcbrtl.github.io%2fposts%2fvyse%2f&title=vyse">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share vyse on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fcbrtl.github.io%2fposts%2fvyse%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share vyse on whatsapp"
        href="https://api.whatsapp.com/send?text=vyse%20-%20https%3a%2f%2fcbrtl.github.io%2fposts%2fvyse%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share vyse on telegram"
        href="https://telegram.me/share/url?text=vyse&amp;url=https%3a%2f%2fcbrtl.github.io%2fposts%2fvyse%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://cbrtl.github.io">cbrtl</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
