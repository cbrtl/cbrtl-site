<!doctype html><html lang=en dir=" auto"><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Nicedear: A Dynamic Avatar Generator | cbrtl</title><meta name=keywords content="avatar,api"><meta name=description content="A random avatar generator for your website or app: a dicebear spoof. "><meta name=author content="fuzzymfx"><link rel=canonical href=https://cbrtl.github.io/posts/nicedear/><link crossorigin=anonymous href=/assets/css/stylesheet.min.4c18fe1ded5bf909faea31e3ec85f25b19d5b85b215c892cd98591b88164dd84.css integrity="sha256-TBj+He1b+Qn66jHj7IXyWxnVuFshXIks2YWRuIFk3YQ=" rel="preload stylesheet" as=style><link rel=icon href=https://cbrtl.github.io/favicon.ico><link rel=apple-touch-icon href=https://cbrtl.github.io/apple-touch-icon.png><meta name=twitter:card content="summary"><meta name=twitter:title content="Nicedear: A Dynamic Avatar Generator | cbrtl"><meta name=twitter:description content="A random avatar generator for your website or app: a dicebear spoof. "><meta property="og:title" content="Nicedear: A Dynamic Avatar Generator | cbrtl"><meta property="og:description" content="A random avatar generator for your website or app: a dicebear spoof. "><meta property="og:type" content="article"><meta property="og:url" content="https://cbrtl.github.io/posts/nicedear/"><meta property="og:image" content="https://cbrtl.github.io/papermod-cover.png"><meta property="og:image" content="https://cbrtl.github.io/assets/icon.ico"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-04-01T00:00:00+00:00"><meta property="article:modified_time" content="2024-04-01T00:00:00+00:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://cbrtl.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Nicedear: A Dynamic Avatar Generator","item":"https://cbrtl.github.io/posts/nicedear/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Nicedear: A Dynamic Avatar Generator | cbrtl","name":"Nicedear: A Dynamic Avatar Generator","description":"A random avatar generator for your website or app: a dicebear spoof. ","keywords":["avatar","api"],"wordCount":"828","inLanguage":"en","datePublished":"2024-04-01T00:00:00Z","dateModified":"2024-04-01T00:00:00Z","author":{"@type":"Person","name":"fuzzymfx"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://cbrtl.github.io/posts/nicedear/"},"publisher":{"@type":"Organization","name":"cbrtl","logo":{"@type":"ImageObject","url":"https://cbrtl.github.io/favicon.ico"}}}</script><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary-bg:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list-page{background:var(--theme)}.list-page:not(.dark)::-webkit-scrollbar-track{background:0 0}.list-page:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body class="type-posts kind-page layout-" id=" top"><script data-no-instant>function switchTheme(e){switch(e){case"light":document.body.classList.remove("dark");break;case"dark":document.body.classList.add("dark");break;default:window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")}}function isDarkTheme(){return document.body.className.includes("dark")}function getPrefTheme(){return localStorage.getItem("pref-theme")}function setPrefTheme(e){switchTheme(e),localStorage.setItem("pref-theme",e)}const toggleThemeCallbacks={};toggleThemeCallbacks.main=e=>{setPrefTheme(e?"light":"dark")},window.addEventListener("toggle-theme",function(){const e=isDarkTheme();for(const t in toggleThemeCallbacks)toggleThemeCallbacks[t](e)});function toggleThemeListener(){window.dispatchEvent(new CustomEvent("toggle-theme"))}</script><script>(function(){const t="auto",e=getPrefTheme(),n=e||t;switchTheme(n)})()</script><header class=header><nav class=nav><div class=logo><a href=https://cbrtl.github.io/ accesskey=h title="cbrtl (Alt + H)">cbrtl</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://cbrtl.github.io/archives/ title=Archive>Archive</a></li><li><a href=https://cbrtl.github.io/search/ title="Search (Alt + /)" data-no-instant accesskey=/>Search</a></li><li><a href=https://cbrtl.github.io/tags/ title=Tags>Tags</a></li></ul></nav></header><main class="main post"><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://cbrtl.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://cbrtl.github.io/posts/>Posts</a></div><h1 class=post-title>Nicedear: A Dynamic Avatar Generator</h1><div class=post-description>A random avatar generator for your website or app: a dicebear spoof.</div><div class=post-meta><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>April 1, 2024</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://cbrtl.github.io/tags/avatar/>avatar</a><a href=https://cbrtl.github.io/tags/api/>api</a></span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>4 min</span></span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#unveiling-the-magic aria-label="Unveiling the Magic">Unveiling the Magic</a></li><li><a href=#the-transformations aria-label="The Transformations">The Transformations</a><ul><li><a href=#parameters aria-label=Parameters>Parameters</a></li></ul></li><li><a href=#usage aria-label=Usage>Usage</a></li><li><a href=#whats-next aria-label="What&amp;rsquo;s Next?">What&rsquo;s Next?</a></li></ul></div></details></div><div class=post-content><p><em>Og - <a href=https://anubhavp.dev/blog/nicedear.html>anubhavp.dev/blog/nicedear</a></em></p><p>Nicedear is a dynamic open-source avatar generator that crafts unique avatars based on user input. Whether you&rsquo;re crafting a personal brand, spicing up your social media, or adding flair to your website, Nicedear has you covered with its mesmerizing array of features and customization options.</p><p><img loading=lazy src=https://anubhavp.dev/assets/img/nicedear/how.svg alt="Nicedear: how"></p><p>Source: <a href="https://api.nicedear.vip/?seed=how">Nicedear</a>, seed: &ldquo;how&rdquo;</p><h2 id=unveiling-the-magic>Unveiling the Magic<a hidden class=anchor aria-hidden=true href=#unveiling-the-magic>¶</a></h2><p>Behind the scenes, Nicedear uses Node and TypeScript to generate the avatar. Here&rsquo;s the <a href=https://github.com/fuzzymfx/nicedear>source</a>, and here&rsquo;s how it works:</p><ol><li>With Nicedear, every avatar starts with a seed - a tiny spark that ignites a world of creativity. Whether you provide your own or let Nicedear conjure one for you, each seed undergoes a simple hashing function, converting it into a numerical value. This hash serves as the foundation for subsequent choices in the avatar&rsquo;s features.</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=font-weight:700>const</span> hashString = (s: <span>string</span>): <span>number</span> =&gt; {
</span></span><span style=display:flex><span><span style=font-weight:700>let</span> hash = 0;
</span></span><span style=display:flex><span><span style=font-weight:700>if</span> (s.length === 0) <span style=font-weight:700>return</span> hash;
</span></span><span style=display:flex><span><span style=font-weight:700>for</span> (<span style=font-weight:700>let</span> i = 0; i &lt; s.length; i++) {
</span></span><span style=display:flex><span>  <span style=font-weight:700>const</span> chr = s.charCodeAt(i);
</span></span><span style=display:flex><span>  hash = (hash &lt;&lt; 5) - hash + chr;
</span></span><span style=display:flex><span>  hash |= 0; <span style=font-style:italic>// Convert to 32bit integer
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>}
</span></span><span style=display:flex><span><span style=font-weight:700>return</span> hash;
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><ol start=2><li>Nicedear then uses the hash to select choices for each feature in the avatar. From captivating heads to charming facial hair, each aspect of your avatar is carefully curated to reflect your style and personality.</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span> <span style=font-weight:700>return</span> features.map((feature) =&gt; {
</span></span><span style=display:flex><span>  <span style=font-weight:700>const</span> index = hash % feature.choices.length;
</span></span><span style=display:flex><span>  <span style=font-weight:700>return</span> feature.choices[index];
</span></span><span style=display:flex><span> });
</span></span></code></pre></div><p>The <strong>Feature Array</strong> is an array of Feature objects that contain the choices for each feature. <code>Head</code>, <code>Face</code>, <code>Facial-hair</code> are examples of features. Nicedear uses the hash to select a choice from each feature. A <strong>feature image</strong> (<em>a face</em>) is a choice from a set of choices(<em>a folder containing all the faces</em>) is selected based on the modulo of the hash and the number of choices in the feature.</p><p>Assuming Input = &ldquo;<code>fuzzymf</code>&rdquo;, the hash generated using the hash function <a href=#hashfunction>⏎</a> is <code>497870557</code>. The hash is then divided by the number of faces present in the folder, say <code>25</code>, to get the modulo, which is <strong>7</strong>. The <strong>7th face</strong> is then selected from the folder containing all the <code>25</code> faces.</p><p>Similarly, the hash is used to select choices for other features, such as <code>Facial-hair</code> and <code>Head</code>.</p><p>Here&rsquo;s an example of a feature object, <code>a suspicious face</code>, from the theme <code>open-peeps</code>, when the input is <code>fuzzymfx</code>:</p><p><img loading=lazy src=https://anubhavp.dev/assets/img/nicedear/Suspicious.svg alt="A Suspicious Face"></p><ol start=3><li>Nicedear then applies transformations to the selected choices, such as scaling, rotating, and mirroring, to create a unique avatar that captures your essence.</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span> <span style=font-weight:700>const</span> layers: <span>OverlayOptions</span>[] = <span style=font-weight:700>await</span> Promise.all(imagePaths.map(<span style=font-weight:700>async</span> (imgPath, i) =&gt; {
</span></span><span style=display:flex><span>  <span style=font-weight:700>const</span> feature = features[i];
</span></span><span style=display:flex><span>  <span style=font-weight:700>const</span> layer: <span>OverlayOptions</span> = { input: <span>imgPath</span> };
</span></span><span style=display:flex><span>  <span style=font-weight:700>if</span> (feature.top) layer.top = feature.top;
</span></span><span style=display:flex><span>  <span style=font-weight:700>if</span> (feature.left) layer.left = feature.left;
</span></span><span style=display:flex><span>  <span style=font-weight:700>return</span> layer;
</span></span><span style=display:flex><span> }));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=font-weight:700>const</span> transparentBackground: <span>SharpOptions</span> = {
</span></span><span style=display:flex><span>  create: {
</span></span><span style=display:flex><span>   width: <span>1000</span>,
</span></span><span style=display:flex><span>   height: <span>1000</span>,
</span></span><span style=display:flex><span>   channels: <span>4</span>,
</span></span><span style=display:flex><span>   background: { r: <span>255</span>, g: <span>255</span>, b: <span>255</span>, alpha: <span>0</span> }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span> };
</span></span><span style=display:flex><span>  <span style=font-weight:700>await</span> Sharp(transparentBackground).composite(layers).png().toFile(<span style=font-style:italic>`_output/</span><span style=font-weight:700;font-style:italic>${</span>seed<span style=font-weight:700;font-style:italic>}${</span>pathHash<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>.png`</span>);
</span></span><span style=display:flex><span>  <span style=font-weight:700>return</span> <span style=font-weight:700>await</span> applyTransformations(<span style=font-style:italic>`_output/</span><span style=font-weight:700;font-style:italic>${</span>seed<span style=font-weight:700;font-style:italic>}${</span>pathHash<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>.png`</span>, params);
</span></span></code></pre></div><p>Nicedear&rsquo;s transformative powers come to life. The selected choices are then layered over and composited together to form the avatar, and a png is created. The png (image) is then transformed and converted to <code>SVG</code>. Your tailored avatar is ready to be shared with the world.</p><h2 id=the-transformations>The Transformations<a hidden class=anchor aria-hidden=true href=#the-transformations>¶</a></h2><p>Nicedear offers a plethora of transformation features to tailor the avatar according to specific preferences:</p><h3 id=parameters>Parameters<a hidden class=anchor aria-hidden=true href=#parameters>¶</a></h3><ul><li><strong>seed</strong>: string<br>Input for the random generator, ensuring reproducibility.</li><li><strong>theme</strong>: string<br>Defines the visual theme of the avatar, with options including open-peeps, female, male, and more.</li><li><strong>mirror</strong>: boolean<br>When set true, flips the image horizontally when set to true.</li><li><strong>rotate</strong>: number<br>Rotates the image by a specified degree. Defaults to 0.</li><li><strong>background</strong>: string<br>The hex code of the background color. Defaults to #ffffff.</li><li><strong>skinColor</strong>: string (<em>pending</em>)<br>The hex code of the avatar&rsquo;s skin color. Defaults to #ffffff.</li><li><strong>hairColor</strong>: string (<em>pending</em>)<br>The hex code of the avatar&rsquo;s hair color. Defaults to #000000.</li><li><strong>scale</strong>: number<br>Adjusts the size of the avatar. Defaults to 1.0.</li><li><strong>transalteX</strong>: number<br>Fine-tunes the x-coordinate of the avatar. Defaults to 0.</li><li><strong>transalteY</strong>: number<br>Fine-tunes the y-coordinate of the avatar. Defaults to 0.</li><li><strong>features</strong>: string[]<br>Specifies which features to include in the avatar, such as face, facial-hair, and head.</li></ul><h2 id=usage>Usage<a hidden class=anchor aria-hidden=true href=#usage>¶</a></h2><p>Whether through command-line interface or API requests, Nicedear offers seamless integration for avatar generation, whether you&rsquo;re a tech-savvy developer enthusiast or a casual user looking to spice up your online presence.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>node dist/index.js foo open-peeps true 45 red skinColor hairColor 1.0 10.0 20.0 face,facial-hair,head
</span></span></code></pre></div><p>And, an API request might look like this:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>GET http://localhost:3000/?seed=&lt;seed&gt;&amp;theme=&lt;theme&gt;&amp;mirror=&lt;mirror&gt;&amp;rotate=&lt;rotate&gt;&amp;background=&lt;background&gt;&amp;skincolor=&lt;skincolor&gt;&amp;hairColor=&lt;hairColor&gt;&amp;scale=&lt;scale&gt;&amp;transalteX=&lt;transalteX&gt;&amp;transalteY=&lt;transalteY&gt;&amp;features=face,facialHair,head
</span></span></code></pre></div><p>Or, a simple API request might look like this:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>api.nicedear.vip/?seed=asimpleone
</span></span></code></pre></div><p><img loading=lazy src=https://anubhavp.dev/assets/img/nicedear/takli.svg alt="Nicedear: simple"></p><p>And, a complex one might look like this:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>api.nicedear.vip/?seed=extreme&amp;theme=open-peeps&amp;mirror=true&amp;rotate=325&amp;scale=0.6&amp;transalteX=10.0&amp;transalteY=20.0&amp;features=face,facialHair,head
</span></span></code></pre></div><p><img loading=lazy src=https://anubhavp.dev/assets/img/nicedear/extreme.svg alt="Nicedear: extreme"></p><p>Or, just visit <a href=https://api.nicedear.vip>https://api.nicedear.vip</a> for a random avatar.</p><h2 id=whats-next>What&rsquo;s Next?<a hidden class=anchor aria-hidden=true href=#whats-next>¶</a></h2><p>The adventure doesn&rsquo;t end here! Nicedear is just getting started. In the coming days, brace yourselves for a tidal wave of new features - from multiple avatars to a kaleidoscope of themes, the future of avatar generation has never looked brighter.</p><p>Dive into the world of Nicedear today and let your imagination run wild. Your perfect avatar awaits, and the possibilities are endless!</p></div><footer class=post-footer><nav class=paginav><a class=prev href=https://cbrtl.github.io/posts/getting-started/><span class=title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select:text"><line x1="19" y1="12" x2="5" y2="12" style="user-select:text"/><polyline points="12 19 5 12 12 5" style="user-select:text"/></svg>&nbsp;Prev Page</span><br><span>Getting started with cbrtl and FOSS</span></a>
<a class=next href=https://cbrtl.github.io/posts/qtree/><span class=title>Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span><br><span>QTree</span></a></nav></footer></article><script id=giscus-script src=https://giscus.app/client.js data-repo=cbrtl/cbrtl.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkzNzE0OTA2Mjc=" data-category=General data-category-id=DIC_kwDOFiR_Q84CfPV2 data-mapping=og:title data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=" light" data-lang=en data-loading=lazy crossorigin=anonymous async></script><script>document.addEventListener("DOMContentLoaded",e=>{var t=document.getElementById("giscus-script"),n=localStorage.getItem("pref-theme")==="light"?"noborder_light":"noborder_gray";t.setAttribute("data-theme",n)})</script><footer class=footer><span>&copy; 2024 <a href=https://cbrtl.github.io/>cbrtl</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>(function(){const t=""=="1";if(t)return;let e=document.getElementById("theme-toggle");e.removeEventListener("click",toggleThemeListener),e.addEventListener("click",toggleThemeListener)})()</script><script>(function(){let e=document.getElementById("menu");e&&(e.scrollLeft=localStorage.getItem("menu-scroll-position"),e.onscroll=function(){localStorage.setItem("menu-scroll-position",e.scrollLeft)});const t=""=="1",n="1"=="1";if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||t||n)return;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})})()</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>if(window.scrollListeners)for(const e of scrollListeners)window.removeEventListener("scroll",e);window.scrollListeners=[]</script><script src=/js/medium-zoom.min.js data-no-instant></script>
<script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script>(function(){const a=""=="1";if(!a)return;if(!document.querySelector(".toc")){console.log("no toc found, ignore toc scroll");return}const r=window.scrollListeners,t=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id]"),n="active";let e=t[0];o(e).classList.add(n);const c=()=>{const s=[];for(const e of t)if(l(e)<5)s.push(e);else break;s.length>0?newActiveHeading=s[s.length-1]:newActiveHeading=t[0],e!=newActiveHeading&&(o(e).classList.remove(n),e=newActiveHeading,o(e).classList.add(n))};let s=null;const i=()=>{s!==null&&clearTimeout(s),s=setTimeout(c,50)};window.addEventListener("scroll",i,!1),r.push(i);function o(e){const t=encodeURI(e.getAttribute("id")).toLowerCase();return document.querySelector(`.toc ul li a[href="#${t}"]`)}function l(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect();return t.top}})()</script><script src=/js/instantclick.min.js data-no-instant></script>
<script data-no-instant>InstantClick.init()</script></main></body></html>